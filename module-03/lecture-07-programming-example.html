<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture 07: Programming Example - Predictive Modeling MOOC</title>
    
<style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
        line-height: 1.6;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f8f9fa;
    }

    .container {
        background-color: white;
        border-radius: 8px;
        padding: 30px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .nav-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px 30px;
        border-radius: 8px 8px 0 0;
        margin: -30px -30px 30px -30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
    }

    .nav-header h1 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 600;
    }

    .nav-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .btn {
        display: inline-block;
        padding: 10px 20px;
        text-decoration: none;
        font-weight: 600;
        border-radius: 6px;
        transition: all 0.3s ease;
        font-size: 0.9rem;
    }

    .btn-colab {
        background-color: #f9ab00;
        color: #1a1a1a;
        border: 2px solid #f9ab00;
    }

    .btn-colab:hover {
        background-color: #ff9900;
        border-color: #ff9900;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(249, 171, 0, 0.3);
    }

    .btn-github {
        background-color: transparent;
        color: white;
        border: 2px solid white;
    }

    .btn-github:hover {
        background-color: white;
        color: #667eea;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3);
    }

    .jupyter-content {
        margin-top: 20px;
    }

    /* Notebook cell styling */
    div.cell {
        margin-bottom: 1.5rem;
    }

    div.input_area {
        border-left: 3px solid #667eea;
        background-color: #f8f9fa;
        padding: 10px;
        border-radius: 4px;
    }

    div.output_area {
        padding: 10px;
        border-left: 3px solid #28a745;
        background-color: #f8f9fa;
        border-radius: 4px;
        margin-top: 10px;
    }

    /* Code highlighting */
    .highlight {
        background-color: #f8f9fa;
        border-radius: 4px;
    }

    /* Responsive design */
    @media (max-width: 768px) {
        body {
            padding: 10px;
        }

        .container {
            padding: 15px;
        }

        .nav-header {
            padding: 15px;
            margin: -15px -15px 15px -15px;
        }

        .nav-header h1 {
            font-size: 1.2rem;
        }

        .nav-buttons {
            width: 100%;
            justify-content: center;
        }
    }
</style>

</head>
<body>
    <div class="container">
        <div class="nav-header">
            <h1>Lecture 07: Programming Example</h1>
            <div class="nav-buttons">
                <a href="https://colab.research.google.com/github/pmarcelino/predictive-modeling/blob/main/04-implementation/module-03/lecture-07-programming-example.ipynb" target="_blank" rel="noopener" class="btn btn-colab">
                    â–¶ Open in Colab
                </a>
                <a href="https://github.com/pmarcelino/predictive-modeling/blob/main/04-implementation/module-03/lecture-07-programming-example.ipynb" target="_blank" rel="noopener" class="btn btn-github">
                    ðŸ“‚ View on GitHub
                </a>
            </div>
        </div>
        <div class="jupyter-content">

<main>
<div class="border-box-sizing" id="notebook" tabindex="-1">
<div class="container" id="notebook-container">
<div class="cell border-box-sizing text_cell rendered" id="cell-id=96834d5c"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Lecture-7:-Programming-Example---Data-Storytelling-&amp;-Visualization">Lecture 7: Programming Example - Data Storytelling &amp; Visualization<a class="anchor-link" href="#Lecture-7:-Programming-Example---Data-Storytelling-&amp;-Visualization">Â¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=382c7b70"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Introduction:-Mastering-Data-Storytelling-Through-Professional-Visualization">Introduction: Mastering Data Storytelling Through Professional Visualization<a class="anchor-link" href="#Introduction:-Mastering-Data-Storytelling-Through-Professional-Visualization">Â¶</a></h2><p>Welcome back, junior data consultant! Your Capital Bikes Washington D.C. client now possesses statistical insights - but numbers alone don't drive decisions. Today, you'll transform from statistical analyst to visual storyteller, mastering the visualization techniques that convert complex transportation patterns into compelling, stakeholder-ready analytical narratives.</p>
<p>Think of data visualization as the consulting translator between mathematical analysis and executive action. While statistical tests quantify relationships, visualizations make those relationships instantly comprehensible to non-technical stakeholders. You'll master the fundamental chart types that professional consultants deploy in their daily work: line plots for temporal patterns, bar charts for categorical comparisons, box plots for distribution analysis, histograms for frequency understanding, and scatter plots for relationship exploration.</p>
<p>Your client is counting on you to transform your statistical discoveries into visual evidence that justifies million-dollar operational decisions. Every visualization you create serves a consulting purpose: answering specific business questions with clarity and precision that enables confident strategic action.</p>
<blockquote>
<p><strong>ðŸš€ Interactive Learning Alert</strong></p>
<p>This is a hands-on visualization tutorial with simple examples and gradual building. For the best experience:</p>
<ul>
<li><strong>Click "Open in Colab"</strong> at the bottom to run code interactively</li>
<li><strong>Execute each code cell</strong> by pressing <strong>Shift + Enter</strong></li>
<li><strong>Complete the challenges</strong> to practice your visualization skills</li>
<li><strong>Think like a consultant</strong> - clarity is more important than complexity</li>
</ul>
</blockquote>
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=dd4aa7f8"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Step-1:-Creating-Line-Plots">Step 1: Creating Line Plots<a class="anchor-link" href="#Step-1:-Creating-Line-Plots">Â¶</a></h2><p>Let's start with the simplest and most useful plot for time-based data: the line plot. We'll show how bike demand changes throughout a typical day.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered" id="cell-id=cacb7ea7">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import the libraries we need</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the Washington D.C. bike-sharing dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Extract the hour from datetime</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'hour'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">hour</span>

<span class="c1"># Calculate average demand for each hour (0-23)</span>
<span class="n">hourly_demand</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'hour'</span><span class="p">)[</span><span class="s1">'count'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Create a basic line plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hourly_demand</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">hourly_demand</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Hour of Day'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Average Bike Rentals'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Daily Bike Demand Pattern'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Peak hour: </span><span class="si">{</span><span class="n">hourly_demand</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span><span class="si">}</span><span class="s2">:00 with </span><span class="si">{</span><span class="n">hourly_demand</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=7b82020d"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>What this does:</strong></p>
<ul>
<li><strong>Load and prepare</strong>: Imports data and extracts hour from the datetime</li>
<li><strong>Calculate averages</strong>: Groups all data by hour and calculates the mean demand</li>
<li><strong>Create line plot</strong>: Uses <code>plt.plot(x_values, y_values)</code> where x_values are the hours (0-23) and y_values are the average bike counts. The function automatically connects these points with a line</li>
<li><strong>Add labels</strong>: <code>plt.xlabel()</code> and <code>plt.ylabel()</code> set the axis labels, while <code>plt.title()</code> adds the chart title. <code>plt.show()</code> displays the completed plot</li>
</ul>
<p><strong>Why a line plot?</strong> Time flows continuously through the day, so connecting points with a line shows that natural flow. You can see the morning and evening rush hours as peaks.</p>
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=8653b82c"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Challenge-1:-Create-a-Line-Plot-for-Weekend-Patterns">Challenge 1: Create a Line Plot for Weekend Patterns<a class="anchor-link" href="#Challenge-1:-Create-a-Line-Plot-for-Weekend-Patterns">Â¶</a></h3><p>Your client asks: "How does demand look on weekends?" Create a line plot showing average hourly demand only for weekend days (Saturday and Sunday).</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered" id="cell-id=ba2b25d4">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'hour'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">hour</span>

<span class="c1"># Your code here - create weekend line plot</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'dayofweek'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">dayofweek</span>  <span class="c1"># 0=Monday, 6=Sunday</span>
<span class="n">weekend_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'dayofweek'</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="n">_____</span><span class="p">,</span> <span class="n">_____</span><span class="p">])]</span>  <span class="c1"># Saturday=5, Sunday=6</span>
<span class="n">weekend_hourly</span> <span class="o">=</span> <span class="n">weekend_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">_____</span><span class="p">)[</span><span class="s1">'_____'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">weekend_hourly</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">weekend_hourly</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Hour of Day'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Average Bike Rentals'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Weekend Bike Demand Pattern'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=835a9694"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<details>
<summary>ðŸ’¡ <strong>Tip</strong> (click to expand)</summary>
<p>Break this into three steps: First, extract the day of week using <code>.dt.dayofweek</code> (remember: 0=Monday, so weekends are 5 and 6). Second, filter the dataframe to keep only weekend days using <code>.isin([5, 6])</code>. Third, group by hour and calculate the mean just like in Step 1. Your client will notice that weekend patterns look different from weekday patterns - probably a single midday peak instead of two rush hour peaks.</p>
</details>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=df148d94"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<details>
<summary>ðŸ¤« <strong>Solution</strong> (click to expand)</summary>
<div class="highlight"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'hour'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">hour</span>

<span class="c1"># Create weekend line plot</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'dayofweek'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">dayofweek</span>
<span class="n">weekend_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'dayofweek'</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])]</span>
<span class="n">weekend_hourly</span> <span class="o">=</span> <span class="n">weekend_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'hour'</span><span class="p">)[</span><span class="s1">'count'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">weekend_hourly</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">weekend_hourly</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Hour of Day'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Average Bike Rentals'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Weekend Bike Demand Pattern'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</details>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=132fb427"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=2174fdab"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Step-2:-Creating-Bar-Plots">Step 2: Creating Bar Plots<a class="anchor-link" href="#Step-2:-Creating-Bar-Plots">Â¶</a></h2><p>Now let's compare categories using a bar plot. We'll compare average demand between weekdays and weekends - perfect for seeing which type of day is busier.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered" id="cell-id=134f0a09">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'datetime'</span><span class="p">])</span>

<span class="c1"># Calculate the average demand for weekdays vs weekends</span>
<span class="n">weekday_avg</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'workingday'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">][</span><span class="s1">'count'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">weekend_avg</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'workingday'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">][</span><span class="s1">'count'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Create lists for the bar plot</span>
<span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Weekday'</span><span class="p">,</span> <span class="s1">'Weekend'</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">weekday_avg</span><span class="p">,</span> <span class="n">weekend_avg</span><span class="p">]</span>

<span class="c1"># Create a bar plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Day Type'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Average Bike Rentals per Hour'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Weekday vs Weekend Demand'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Weekday average: </span><span class="si">{</span><span class="n">weekday_avg</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes per hour"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Weekend average: </span><span class="si">{</span><span class="n">weekend_avg</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes per hour"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=a0a2f480"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>What this does:</strong></p>
<ul>
<li><strong>Calculate category averages</strong>: Finds mean demand for weekdays (workingday=1) and weekends (workingday=0)</li>
<li><strong>Prepare data</strong>: Creates simple lists of category names and their values</li>
<li><strong>Create bar plot</strong>: Uses <code>plt.bar(categories, values)</code> to draw bars where the first argument (categories) becomes the x-axis labels and the second argument (values) becomes the bar heights representing each average</li>
<li><strong>Add labels</strong>: Uses <code>plt.xlabel()</code>, <code>plt.ylabel()</code>, and <code>plt.title()</code> to add descriptive text that makes the comparison clear and professional-looking</li>
</ul>
<p><strong>Why a bar plot?</strong> When comparing distinct categories (weekday vs weekend), bars make it easy to see which is higher. The height difference shows the answer instantly.</p>
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=347e9baf"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Challenge-2:-Create-a-Bar-Plot-Comparing-All-Four-Seasons">Challenge 2: Create a Bar Plot Comparing All Four Seasons<a class="anchor-link" href="#Challenge-2:-Create-a-Bar-Plot-Comparing-All-Four-Seasons">Â¶</a></h3><p>Your client wants to see: "Which season has the highest bike demand?" Create a bar plot comparing average demand across all four seasons.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered" id="cell-id=71c72789">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Your code here - create seasonal comparison bar plot</span>
<span class="n">seasonal_avg</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">_____</span><span class="p">)[</span><span class="s1">'_____'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Spring'</span><span class="p">,</span> <span class="s1">'Summer'</span><span class="p">,</span> <span class="s1">'Fall'</span><span class="p">,</span> <span class="s1">'Winter'</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">seasonal_avg</span><span class="o">.</span><span class="n">values</span>

<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">_____</span><span class="p">,</span> <span class="n">_____</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Season'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Average Bike Rentals per Hour'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Seasonal Bike Demand Comparison'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Print the results</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">season</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">categories</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">season</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes per hour"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=fbf99f28"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<details>
<summary>ðŸ’¡ <strong>Tip</strong> (click to expand)</summary>
<p>This is similar to the weekday/weekend comparison, but with four categories instead of two. Use <code>.groupby('season')</code> to calculate the average for each season (the dataset has season codes 1-4). The season codes map to: 1=Spring, 2=Summer, 3=Fall, 4=Winter. Remember to use <code>.mean()</code> after grouping to get averages. Watch out: the season values in the dataframe are numbers (1,2,3,4), but you want readable labels on your chart. Your client will likely see that summer has the highest demand (warm weather = more biking) and winter has the lowest (cold = fewer riders).</p>
</details>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=46991c07"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<details>
<summary>ðŸ¤« <strong>Solution</strong> (click to expand)</summary>
<div class="highlight"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Create seasonal comparison bar plot</span>
<span class="n">seasonal_avg</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'season'</span><span class="p">)[</span><span class="s1">'count'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Spring'</span><span class="p">,</span> <span class="s1">'Summer'</span><span class="p">,</span> <span class="s1">'Fall'</span><span class="p">,</span> <span class="s1">'Winter'</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">seasonal_avg</span><span class="o">.</span><span class="n">values</span>

<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Season'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Average Bike Rentals per Hour'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Seasonal Bike Demand Comparison'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Print the results</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">season</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">categories</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">season</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes per hour"</span><span class="p">)</span>
</pre></div>
</details>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=68e4f442"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=53e8d24c"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Step-3:-Creating-Box-Plots-(Understanding-Distributions-with-Confidence)">Step 3: Creating Box Plots (Understanding Distributions with Confidence)<a class="anchor-link" href="#Step-3:-Creating-Box-Plots-(Understanding-Distributions-with-Confidence)">Â¶</a></h2><p>Before we dive into histograms, let's learn about box plots - a compact way to show how data is distributed across different categories. Box plots show you the "middle 50%" of your data and help you spot outliers.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered" id="cell-id=876fb18e">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Create box plot comparing weekday vs weekend demand</span>
<span class="n">weekday_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'workingday'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">][</span><span class="s1">'count'</span><span class="p">]</span>
<span class="n">weekend_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'workingday'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">][</span><span class="s1">'count'</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">([</span><span class="n">weekday_data</span><span class="p">,</span> <span class="n">weekend_data</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s1">'Weekday'</span><span class="p">,</span> <span class="s1">'Weekend'</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Bike Rentals per Hour'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Demand Distribution: Weekday vs Weekend'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Print the quartiles</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Weekday demand:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  25th percentile: </span><span class="si">{</span><span class="n">weekday_data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  50th percentile (median): </span><span class="si">{</span><span class="n">weekday_data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.50</span><span class="p">)</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  75th percentile: </span><span class="si">{</span><span class="n">weekday_data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=297927fd"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>What this does:</strong></p>
<ul>
<li><strong>Load and prepare</strong>: Imports data and creates two separate datasets - one for weekdays (workingday == 1) and one for weekends (workingday == 0)</li>
<li><strong>Create box plot</strong>: Uses <code>plt.boxplot([data1, data2], labels=['Label1', 'Label2'])</code> where the first argument is a list of datasets to compare, and labels provides the category names</li>
<li><strong>Add labels</strong>: <code>plt.ylabel()</code> and <code>plt.title()</code> label the chart, <code>plt.show()</code> displays it</li>
<li><strong>Calculate quartiles</strong>: Uses <code>.quantile()</code> to find the 25th, 50th (median), and 75th percentiles</li>
</ul>
<p><strong>What this shows:</strong></p>
<ul>
<li><strong>The box</strong>: Shows the middle 50% of data (from 25th to 75th percentile)</li>
<li><strong>The line inside the box</strong>: That's the median (50th percentile) - the middle value</li>
<li><strong>The whiskers</strong>: The lines extending from the box show the typical range</li>
<li><strong>The dots</strong>: Any dots beyond the whiskers are outliers - unusual values (if we had cleaned the data properly, these probably wouldn't be here)</li>
</ul>
<p><strong>Why use box plots?</strong> They give you a complete picture of your data's spread in a compact format. You can quickly see if weekdays and weekends have similar ranges or if one is more variable than the other.</p>
<p><strong>Understanding confidence with box plots:</strong> The box shows you where you can be confident most data falls. If 50% of your data is between 40 and 280 bikes (the box), you can confidently plan operations for that range. The whiskers extend to show the typical minimum and maximum (excluding outliers), giving you the full operational range.</p>
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=a908f9c9"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Challenge-3:-Create-Box-Plot-Comparing-Seasonal-Demand">Challenge 3: Create Box Plot Comparing Seasonal Demand<a class="anchor-link" href="#Challenge-3:-Create-Box-Plot-Comparing-Seasonal-Demand">Â¶</a></h3><p>Your client asks: "How does demand variability differ across seasons?" Create a box plot comparing the distribution of bike demand across all four seasons.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered" id="cell-id=ac88c6e0">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Your code here - create seasonal box plot</span>
<span class="n">season_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">_____</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="n">_____</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="n">_____</span><span class="p">,</span> <span class="n">_____</span><span class="p">,</span> <span class="n">_____</span><span class="p">,</span> <span class="n">_____</span><span class="p">]]</span>
<span class="n">season_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Spring'</span><span class="p">,</span> <span class="s1">'Summer'</span><span class="p">,</span> <span class="s1">'Fall'</span><span class="p">,</span> <span class="s1">'Winter'</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">_____</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">_____</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Bike Rentals per Hour'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Demand Distribution by Season'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Print insights</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">season</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">season_labels</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">season_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'season'</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="s1">'count'</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">season</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  Median: </span><span class="si">{</span><span class="n">season_df</span><span class="o">.</span><span class="n">median</span><span class="p">()</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  Middle 50% range: </span><span class="si">{</span><span class="n">season_df</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">season_df</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=7de65409"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<details>
<summary>ðŸ’¡ <strong>Tip</strong> (click to expand)</summary>
<p>Box plots are perfect for comparing distributions across categories. Here's the approach: First, create a list of four datasets, one for each season (season codes are 1=Spring, 2=Summer, 3=Fall, 4=Winter). Use a list comprehension with filtering: <code>[df[df['season'] == i]['count'] for i in [1, 2, 3, 4]]</code>. This creates four separate arrays of bike counts. Then pass this list to <code>plt.boxplot()</code> along with readable season labels. The plot will show you not just average demand (the median line in each box), but also the spread of demand (box width) and outliers (dots). Your client will likely see that summer has both the highest median demand and possibly more variability, while winter has the lowest and tightest distribution. Wide boxes mean unpredictable demand requiring flexible capacity planning.</p>
</details>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=be073dc4"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<details>
<summary>ðŸ¤« <strong>Solution</strong> (click to expand)</summary>
<div class="highlight"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Create seasonal box plot</span>
<span class="n">season_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'season'</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="s1">'count'</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="n">season_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Spring'</span><span class="p">,</span> <span class="s1">'Summer'</span><span class="p">,</span> <span class="s1">'Fall'</span><span class="p">,</span> <span class="s1">'Winter'</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">season_data</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">season_labels</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Bike Rentals per Hour'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Demand Distribution by Season'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Print insights</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">season</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">season_labels</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">season_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'season'</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="s1">'count'</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">season</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  Median: </span><span class="si">{</span><span class="n">season_df</span><span class="o">.</span><span class="n">median</span><span class="p">()</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  Middle 50% range: </span><span class="si">{</span><span class="n">season_df</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">season_df</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> bikes"</span><span class="p">)</span>
</pre></div>
</details>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=66870c8c"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=9f9076e6"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Step-4:-Creating-Histograms-(Understanding-Bins!)">Step 4: Creating Histograms (Understanding Bins!)<a class="anchor-link" href="#Step-4:-Creating-Histograms-(Understanding-Bins!)">Â¶</a></h2><p>Histograms show how data is distributed - how often different values occur. The key concept here is <strong>bins</strong>: the ranges that group your data together.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered" id="cell-id=06888831">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Create a histogram with 20 bins</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'count'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Bike Rentals per Hour'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Number of Hours'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Distribution of Hourly Bike Demand (20 bins)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Most common demand range: Look for the tallest bar"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Total hours analyzed: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=a40f22d4"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>What this does:</strong></p>
<ul>
<li><strong>Create histogram</strong>: Uses <code>plt.hist()</code> function which takes the data column <code>df['count']</code> and automatically divides it into bins (ranges), then counts how many data points fall into each bin and displays them as bars</li>
<li><strong>bins=20</strong>: Divides the entire range of rentals (from min to max) into 20 equal-width bins</li>
<li><strong>Bar height</strong>: Shows how many hours had demand in that bin's range</li>
</ul>
<p><strong>What are bins?</strong> Think of bins like buckets. If demand ranges from 0-1000 bikes and you use 20 bins, each bin is 50 bikes wide (0-50, 50-100, 100-150, etc.). The histogram shows how many hours fall into each bucket.</p>
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=09e5d823"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Challenge-4:-Create-a-Histogram-of-Temperature-Distribution">Challenge 4: Create a Histogram of Temperature Distribution<a class="anchor-link" href="#Challenge-4:-Create-a-Histogram-of-Temperature-Distribution">Â¶</a></h3><p>Your client asks: "What temperatures do we experience in D.C.?" Create a histogram showing the distribution of temperatures, then experiment with different numbers of bins.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered" id="cell-id=068b20d5">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Your code here - create temperature histogram</span>
<span class="c1"># REPLACE THIS LINE WITH YOUR CODE: Create histogram of temperature data (experiment with number of bins)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Temperature (Celsius)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Number of Hours'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Distribution of D.C. Temperatures'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Print some statistics</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Average temperature: </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">Â°C"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Coldest hour: </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">Â°C"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Warmest hour: </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">Â°C"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=c49eb772"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<details>
<summary>ðŸ’¡ <strong>Tip</strong> (click to expand)</summary>
<p>Use <code>plt.hist()</code> with the 'temp' column from the dataframe. Start with bins=25 to get good detail. Temperature in D.C. ranges roughly from -5Â°C to 40Â°C, so 25 bins means each bucket represents about 2 degrees. Try changing bins to 10, then 50 to see how it affects the visualization. You'll probably see that most hours cluster around moderate temperatures (15-25Â°C) with fewer very cold or very hot hours. This distribution helps your client understand what weather conditions to plan for.</p>
</details>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=6293d20e"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<details>
<summary>ðŸ¤« <strong>Solution</strong> (click to expand)</summary>
<div class="highlight"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Create temperature histogram</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Temperature (Celsius)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Number of Hours'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Distribution of D.C. Temperatures'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Print some statistics</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Average temperature: </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">Â°C"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Coldest hour: </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">Â°C"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Warmest hour: </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">Â°C"</span><span class="p">)</span>
</pre></div>
</details>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=9e4b570c"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=57b52da8"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Step-5:-Creating-Scatter-Plots-(with-Trendlines!)">Step 5: Creating Scatter Plots (with Trendlines!)<a class="anchor-link" href="#Step-5:-Creating-Scatter-Plots-(with-Trendlines!)">Â¶</a></h2><p>Scatter plots show the relationship between two variables. Let's see how temperature affects bike demand, and add a trendline to see the overall pattern.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered" id="cell-id=888fd468">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Create a scatter plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">'count'</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Add a trendline</span>
<span class="c1"># Step 1: Calculate the line that best fits the data</span>
<span class="n">coefficients</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">'count'</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># 1 means a straight line</span>
<span class="n">trendline</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">coefficients</span><span class="p">)</span>  <span class="c1"># Creates a function for the line</span>

<span class="c1"># Step 2: Create points along the line to plot it</span>
<span class="n">temp_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">demand_trend</span> <span class="o">=</span> <span class="n">trendline</span><span class="p">(</span><span class="n">temp_range</span><span class="p">)</span>

<span class="c1"># Step 3: Plot the trendline</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">temp_range</span><span class="p">,</span> <span class="n">demand_trend</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">'Trendline'</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Temperature (Celsius)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Bike Rentals per Hour'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Temperature vs Bike Demand (with Trendline)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Calculate and show correlation</span>
<span class="n">correlation</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'temp'</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'count'</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Correlation: </span><span class="si">{</span><span class="n">correlation</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Interpretation: </span><span class="si">{</span><span class="s1">'Positive'</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">correlation</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">'Negative'</span><span class="si">}</span><span class="s2"> relationship"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=976b5b46"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>What this does:</strong></p>
<ul>
<li><strong>Create scatter plot</strong>: <code>plt.scatter(x_values, y_values)</code> plots points where each point represents one data row. The first parameter (df['temp']) becomes the x-coordinate, the second parameter (df['count']) becomes the y-coordinate. So each hour in our dataset becomes one dot positioned at (temperature, bike_demand)</li>
<li><strong>alpha=0.5</strong>: Makes the points semi-transparent so you can see overlapping points better</li>
<li><strong>Shows relationship</strong>: You can see if higher temperatures generally have higher demand</li>
</ul>
<p><strong>Why a scatter plot?</strong> When you have two continuous measurements (temperature and demand), scatter plots let you see if they're related. Do points go up together? That's a positive relationship.</p>
<p><strong>What the trendline shows:</strong></p>
<ul>
<li><strong>np.polyfit()</strong>: Finds the best straight line through the scattered points</li>
<li><strong>Red line</strong>: Shows the general trend - as temperature increases, demand generally increases</li>
<li><strong>Correlation</strong>: A number between -1 and 1 showing how strong the relationship is<ul>
<li>Close to 1 = strong positive relationship (both go up together)</li>
<li>Close to -1 = strong negative relationship (one up, other down)</li>
<li>Close to 0 = weak relationship (not much pattern)</li>
</ul>
</li>
</ul>
<p><strong>What are you seeing?</strong> If the trendline slopes upward, warmer weather means more bike rentals. The correlation number confirms what your eyes see.</p>
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=9688e9bc"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Challenge-5:-Clean-Up-the-Scatter-Plot-Using-Bins">Challenge 5: Clean Up the Scatter Plot Using Bins<a class="anchor-link" href="#Challenge-5:-Clean-Up-the-Scatter-Plot-Using-Bins">Â¶</a></h3><p>Your client looks at the humidity scatter plot and says: "This is too messy with 17,000+ overlapping points. Can you clean this up like professional analysts do?" Let's use <strong>binning</strong> to aggregate the data and show mean values with confidence intervals - creating a cleaner, more professional visualization.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered" id="cell-id=72d2c404">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy</span><span class="w"> </span><span class="kn">import</span> <span class="n">stats</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Your code here - create a binned scatter plot with confidence intervals</span>
<span class="c1"># Step 1: Create humidity bins to aggregate data</span>
<span class="c1"># REPLACE THIS LINE WITH YOUR CODE: df['humidity_bin'] = pd.cut(...)</span>

<span class="c1"># Step 2: Calculate mean, std, and count for each bin</span>
<span class="c1"># REPLACE THIS LINE WITH YOUR CODE: binned = df.groupby(...).agg([...])</span>

<span class="c1"># Step 3: Calculate standard error and get bin centers</span>
<span class="n">binned</span><span class="p">[</span><span class="s1">'se'</span><span class="p">]</span> <span class="o">=</span> <span class="n">binned</span><span class="p">[</span><span class="s1">'std'</span><span class="p">]</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">binned</span><span class="p">[</span><span class="s1">'count'</span><span class="p">])</span>
<span class="c1"># REPLACE THIS LINE WITH YOUR CODE: binned['humidity_center'] = ...</span>

<span class="c1"># Step 4: Create the plot with error bars (95% confidence interval)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">binned</span><span class="p">[</span><span class="s1">'humidity_center'</span><span class="p">],</span> <span class="n">binned</span><span class="p">[</span><span class="s1">'mean'</span><span class="p">],</span>
             <span class="n">yerr</span><span class="o">=</span><span class="n">binned</span><span class="p">[</span><span class="s1">'se'</span><span class="p">]</span><span class="o">*</span><span class="mf">1.96</span><span class="p">,</span>  <span class="c1"># 95% confidence interval</span>
             <span class="n">fmt</span><span class="o">=</span><span class="s1">'o'</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">capsize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">capthick</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
             <span class="n">color</span><span class="o">=</span><span class="s1">'#3498DB'</span><span class="p">,</span> <span class="n">ecolor</span><span class="o">=</span><span class="s1">'#3498DB'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
             <span class="n">label</span><span class="o">=</span><span class="s1">'Mean Demand (95% CI)'</span><span class="p">)</span>

<span class="c1"># Step 5: Add trendline using the original (unbinned) data</span>
<span class="c1"># REPLACE THIS LINE WITH YOUR CODE: slope, intercept, r_value, p_value, std_err = stats.linregress(...)</span>
<span class="n">line_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">'humidity'</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">df</span><span class="p">[</span><span class="s1">'humidity'</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>
<span class="n">line_y</span> <span class="o">=</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">line_x</span> <span class="o">+</span> <span class="n">intercept</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">line_x</span><span class="p">,</span> <span class="n">line_y</span><span class="p">,</span> <span class="s1">'r--'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">'Trend Line (r = </span><span class="si">{</span><span class="n">r_value</span><span class="si">:</span><span class="s1">.3f</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Humidity (%)'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">'bold'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Hourly Bike Rentals'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">'bold'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Humidity-Demand Relationship: Binned Analysis Reduces Visual Clutter'</span><span class="p">,</span>
         <span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">'bold'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">'upper right'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Print insights</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Humidity-demand correlation: r = </span><span class="si">{</span><span class="n">r_value</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Humidity explains </span><span class="si">{</span><span class="p">(</span><span class="n">r_value</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">% of demand variation"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"For each 1% increase in humidity, demand changes by </span><span class="si">{</span><span class="n">slope</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> rentals"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=cfa8ef6d"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<details>
<summary>ðŸ’¡ <strong>Tip</strong> (click to expand)</summary>
<p>The binning approach has several steps: (1) Create bins with pd.cut() to divide humidity into 20 equal ranges, (2) Use groupby().agg() to calculate mean, std (standard deviation), and count for each bin, (3) Calculate standard error (se = std / sqrt(count)) which measures uncertainty in each bin's mean, (4) Get bin centers with .mid to position points, (5) Plot with errorbar() using yerr=se*1.96 for 95% confidence intervals, (6) Add the trendline using stats.linregress() on the original unbinned data for accurate correlation. The confidence interval bars show: wider bars = more uncertainty (fewer observations in that bin), narrower bars = more certainty (many observations). This creates a professional visualization that's much cleaner than 17,000 overlapping raw points! Watch out: humidity typically has a negative correlation (higher humidity = uncomfortable = fewer riders).</p>
</details>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=e112c78c"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<details>
<summary>ðŸ¤« <strong>Solution</strong> (click to expand)</summary>
<div class="highlight"><pre><span></span><span class="c1"># Import libraries and load data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy</span><span class="w"> </span><span class="kn">import</span> <span class="n">stats</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://raw.githubusercontent.com/pmarcelino/predictive-modeling/main/datasets/dataset.csv"</span><span class="p">)</span>

<span class="c1"># Create a binned scatter plot with confidence intervals</span>
<span class="c1"># Step 1: Create humidity bins to aggregate data</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'humidity_bin'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'humidity'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="c1"># Step 2: Calculate mean, std, and count for each bin</span>
<span class="n">binned</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'humidity_bin'</span><span class="p">,</span> <span class="n">observed</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="s1">'count'</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">'mean'</span><span class="p">,</span> <span class="s1">'std'</span><span class="p">,</span> <span class="s1">'count'</span><span class="p">])</span>

<span class="c1"># Step 3: Calculate standard error and get bin centers</span>
<span class="n">binned</span><span class="p">[</span><span class="s1">'se'</span><span class="p">]</span> <span class="o">=</span> <span class="n">binned</span><span class="p">[</span><span class="s1">'std'</span><span class="p">]</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">binned</span><span class="p">[</span><span class="s1">'count'</span><span class="p">])</span>
<span class="n">binned</span><span class="p">[</span><span class="s1">'humidity_center'</span><span class="p">]</span> <span class="o">=</span> <span class="n">binned</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">mid</span><span class="p">)</span>

<span class="c1"># Step 4: Create the plot with error bars (95% confidence interval)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">binned</span><span class="p">[</span><span class="s1">'humidity_center'</span><span class="p">],</span> <span class="n">binned</span><span class="p">[</span><span class="s1">'mean'</span><span class="p">],</span>
             <span class="n">yerr</span><span class="o">=</span><span class="n">binned</span><span class="p">[</span><span class="s1">'se'</span><span class="p">]</span><span class="o">*</span><span class="mf">1.96</span><span class="p">,</span>  <span class="c1"># 95% confidence interval</span>
             <span class="n">fmt</span><span class="o">=</span><span class="s1">'o'</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">capsize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">capthick</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
             <span class="n">color</span><span class="o">=</span><span class="s1">'#3498DB'</span><span class="p">,</span> <span class="n">ecolor</span><span class="o">=</span><span class="s1">'#3498DB'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
             <span class="n">label</span><span class="o">=</span><span class="s1">'Mean Demand (95% CI)'</span><span class="p">)</span>

<span class="c1"># Step 5: Add trendline using the original (unbinned) data</span>
<span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r_value</span><span class="p">,</span> <span class="n">p_value</span><span class="p">,</span> <span class="n">std_err</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'humidity'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">'count'</span><span class="p">])</span>
<span class="n">line_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">'humidity'</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">df</span><span class="p">[</span><span class="s1">'humidity'</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>
<span class="n">line_y</span> <span class="o">=</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">line_x</span> <span class="o">+</span> <span class="n">intercept</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">line_x</span><span class="p">,</span> <span class="n">line_y</span><span class="p">,</span> <span class="s1">'r--'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">'Trend Line (r = </span><span class="si">{</span><span class="n">r_value</span><span class="si">:</span><span class="s1">.3f</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Humidity (%)'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">'bold'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Hourly Bike Rentals'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">'bold'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Humidity-Demand Relationship: Binned Analysis Reduces Visual Clutter'</span><span class="p">,</span>
         <span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">'bold'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">'upper right'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Print insights</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Humidity-demand correlation: r = </span><span class="si">{</span><span class="n">r_value</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Humidity explains </span><span class="si">{</span><span class="p">(</span><span class="n">r_value</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">% of demand variation"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"For each 1% increase in humidity, demand changes by </span><span class="si">{</span><span class="n">slope</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> rentals"</span><span class="p">)</span>
</pre></div>
</details>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=87ab4356"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr/>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered" id="cell-id=4b44f1f0"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Summary:-Professional-Data-Visualization-and-Communication-Techniques">Summary: Professional Data Visualization and Communication Techniques<a class="anchor-link" href="#Summary:-Professional-Data-Visualization-and-Communication-Techniques">Â¶</a></h2><p><strong>What We've Accomplished</strong>:</p>
<ul>
<li>Created line plots to visualize hourly demand patterns and identify peak usage times</li>
<li>Built bar charts to compare categorical data like weekday vs weekend demand and seasonal patterns</li>
<li>Developed box plots to analyze demand distributions, identify outliers, and understand quartile ranges</li>
<li>Constructed histograms to visualize frequency distributions with strategic bin selection</li>
<li>Built scatter plots with trendlines to explore temperature-demand relationships and calculate correlations</li>
</ul>
<p><strong>Key Technical Skills Mastered</strong>:</p>
<ul>
<li><code>plt.plot()</code> for temporal line plots, <code>plt.bar()</code> for categorical comparisons, <code>plt.boxplot()</code> for distributions, <code>plt.hist()</code> for frequencies, and <code>plt.scatter()</code> for relationships</li>
<li>Chart customization with <code>xlabel()</code>, <code>ylabel()</code>, and <code>title()</code> for professional presentation</li>
<li>Box plot interpretation: quartiles, medians, whiskers, and outliers</li>
<li>Histogram bin selection to balance detail and clarity</li>
<li>Trendline creation using <code>np.polyfit()</code> and <code>np.poly1d()</code> for linear regression visualization</li>
<li>Correlation calculation with <code>.corr()</code> to quantify relationship strength</li>
<li>Data aggregation with <code>groupby()</code> and <code>.mean()</code> for visualization preparation</li>
<li>Transparency control with <code>alpha</code> parameter for overlapping points</li>
</ul>
<p><strong>Next Steps</strong>: Next, we'll advance to machine learning model development and predictive analytics implementation, leveraging your visualization capabilities to evaluate model performance.</p>
<p>Your bike-sharing client now possesses professional-grade data visualization capabilities that transform raw statistical analysis into compelling visual narratives driving evidence-based operational decisions. You've mastered the fundamental visualization methodologies that consulting firms require for stakeholder presentations, executive briefings, and analytical report generation - demonstrating the visual storytelling expertise that separates professional transportation consultants from basic data analysts!</p>
</div>
</div>
</div>
</div>
</div>
</main>

        </div>
    </div>
</body>
</html>
